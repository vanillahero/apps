<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blackjack</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%2250%22 y=%2275%22 font-size=%2280%22 text-anchor=%22middle%22>%F0%9F%92%B8</text></svg>">
<style>
:root {
--felt-color: #006400;
--felt-highlight: #008000;
--border-color: #4a2c2a;
--text-color: #f0f0f0;
--gold-color: #ffcc00;
--card-bg: #fff;
--card-shadow: rgba(0, 0, 0, 0.3);
--red-suit: #D32F2F;
--black-suit: #212121;
}
body::before {
content: '';
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100vh;
z-index: -1;
background-image: url("data:image/svg+xml,<svg width='40' height='40' xmlns='http://www.w3.org/2000/svg'><rect width='40' height='40' fill='%23030328'/><path d='M40 0v40H0' fill='none' stroke='%2300d1ff' stroke-width='0.5'/></svg>");
background-size: 40px;
background-repeat: repeat;
opacity: 0.90;
}
body {
display: flex;
justify-content: center;
align-items: center;
font-family: 'Segoe UI', 'Arial', sans-serif;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
-webkit-tap-highlight-color: transparent;
background-color: #000;
margin: 0;
padding: 0;
overflow: hidden;
}
#blackjack_container {
display: flex;
flex-direction: column;
justify-content: space-between;
aspect-ratio: 1 / 1;
max-height: 100vh;
height: 98vh;
max-width: 100vw;
background: radial-gradient(circle, var(--felt-highlight) 0%, var(--felt-color) 70%);
border: 1.5vmin solid var(--border-color);
box-shadow: inset 0 0 1.5vmin rgba(0, 0, 0, 0.7), 0 0 2vmin rgba(0, 0, 0, 0.5);
border-radius: 12px;
box-sizing: border-box;
padding: 2vmin 3vmin;
position: relative;
}
#blackjack_dealerArea,
#blackjack_playerZone {
flex-shrink: 0;
display: flex;
flex-direction: column;
align-items: center;
width: 100%;
}
#blackjack_emojiArea {
flex-grow: 1;
display: flex;
justify-content: center;
align-items: center;
font-size: clamp(40px, 12vmin, 150px);
text-shadow: 0.2vmin 0.2vmin 1vmin rgba(0, 0, 0, 0.4);
transition: transform 0.3s ease-in-out;
min-height: 0;
}
#blackjack_emoji.neutral {
transform: scale(1);
}
#blackjack_emoji.happy {
transform: scale(1.1) rotate(5deg);
color: #FFD700;
}
#blackjack_emoji.sad {
transform: scale(0.9) rotate(-5deg);
opacity: 0.8;
}
#blackjack_dealerArea h3,
#blackjack_playerArea h3 {
font-size: clamp(12px, 2.5vmin, 22px);
margin: 1vmin 0;
color: var(--text-color);
text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
white-space: nowrap;
}
.blackjack_cardArea {
display: flex;
justify-content: center;
align-items: center;
flex-wrap: nowrap;
min-height: clamp(80px, 15vmin, 140px);
}
.blackjack_card {
width: clamp(50px, 9vmin, 100px);
height: clamp(70px, 13vmin, 140px);
background-color: var(--card-bg);
border: 0.1vmin solid #ccc;
border-radius: 0.8vmin;
box-shadow: 0.3vmin 0.3vmin 0.8vmin var(--card-shadow);
font-size: clamp(15px, 2.6vmin, 22px);
color: var(--black-suit);
position: relative;
flex-shrink: 0;
}
.blackjack_card:not(:first-child) {
margin-left: -5.5vmin;
}
.blackjack_card.red {
color: var(--red-suit);
}
.blackjack_card_rank_topleft,
.blackjack_card_rank_bottomright,
.blackjack_card_suit_center {
position: absolute;
}
.blackjack_card_rank_topleft {
top: 0.4em;
left: 0.4em;
}
.blackjack_card_rank_bottomright {
bottom: 0.4em;
right: 0.4em;
transform: rotate(180deg);
}
.blackjack_card_suit_center {
font-size: 3.5em;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
}
#blackjack_playerZone {
gap: 1.5vmin;
}
#blackjack_bettingArea {
display: flex;
flex-wrap: wrap;
justify-content: center;
align-items: center;
gap: 1.5em;
background-color: rgba(0, 0, 0, 0.25);
padding: 1vmin 2vmin;
border-radius: 12px;
font-size: clamp(12px, 2.2vmin, 20px);
width: auto;
max-width: 90%;
color: var(--gold-color);
white-space: nowrap;
}
#blackjack_bettingArea>div {
display: flex;
align-items: center;
gap: 0.7em;
}
#blackjack_bettingBtns {
display: flex;
gap: 1vmin;
}
#blackjack_controls {
display: flex;
justify-content: center;
gap: 1.5vmin;
}
.blackjack_btn {
padding: 0.8em 1.5em;
font-size: clamp(12px, 2.2vmin, 18px);
font-weight: bold;
cursor: pointer;
border: none;
border-radius: 0.8vmin;
white-space: nowrap;
color: var(--text-color);
transition: all 0.2s ease;
text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.4);
box-shadow: 0 0.4vmin 0.6vmin rgba(0, 0, 0, 0.3), inset 0 -0.2vmin 0.2vmin rgba(0, 0, 0, 0.2);
}
.blackjack_btn:not([disabled]):hover {
transform: translateY(-0.2vmin);
}
.blackjack_btn:not([disabled]):active {
transform: translateY(0.1vmin);
}
.blackjack_btn:disabled {
background-color: #888 !important;
cursor: not-allowed;
opacity: 0.6;
}
.blackjack_betBtn {
border-radius: 50px;
}
#blackjack_hitBtn {
background-color: #0099ff;
}
#blackjack_standBtn {
background-color: #cc0000;
}
#blackjack_playAgainBtn {
background-color: #663399;
}
.blackjack_betBtn {
background-color: #2196F3;
}
.blackjack_betBtn:hover:not(:disabled) {
background-color: #1976D2;
}
.blackjack_score {
font-size: 1.2em;
font-weight: bold;
color: var(--gold-color);
}
#blackjack_message {
position: absolute;
top: 23%;
left: 50%;
transform: translate(-50%, -50%);
background-color: rgba(0, 0, 0, 0.85);
color: #fff;
padding: 1.5em 2em;
border: 2px solid var(--gold-color);
border-radius: 10px;
font-size: clamp(14px, 3.5vmin, 28px);
text-align: center;
display: none;
z-index: 20;
max-width: 80%;
box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
}
</style>
</head>
<body>
<div id="blackjack_container">
<div id="blackjack_dealerArea">
<h3>Dealer's Hand: <span id="blackjack_dealerScore" class="blackjack_score">0</span></h3>
<div id="blackjack_dealerCards" class="blackjack_cardArea"></div>
</div>
<div id="blackjack_emojiArea">
<span id="blackjack_emoji" class="neutral">ðŸ™‚</span>
</div>
<div id="blackjack_playerZone">
<div id="blackjack_playerArea">
<h3>Your Hand: <span id="blackjack_playerScore" class="blackjack_score">0</span></h3>
<div id="blackjack_playerCards" class="blackjack_cardArea"></div>
</div>
<div id="blackjack_bettingArea">
<div>Chips: <span id="blackjack_chipsDisplay">1000</span></div>
<div style="opacity: 0.7;">Goal: <span id="blackjack_goalDisplay"></span></div>
<div id="blackjack_bettingBtns">
<button class="blackjack_btn blackjack_betBtn" data-bet="10">10</button>
<button class="blackjack_btn blackjack_betBtn" data-bet="50">50</button>
<button class="blackjack_btn blackjack_betBtn" data-bet="100">100</button>
<button class="blackjack_btn blackjack_betBtn" data-bet="200">200</button>
<button class="blackjack_btn blackjack_betBtn" data-bet="500">500</button>
</div>
</div>
<div id="blackjack_controls">
<button id="blackjack_hitBtn" class="blackjack_btn" disabled>Hit</button>
<button id="blackjack_standBtn" class="blackjack_btn" disabled>Stand</button>
<button id="blackjack_playAgainBtn" class="blackjack_btn" style="display: none;">Play Again</button>
</div>
</div>
<div id="blackjack_message"></div>
</div>
<script>
(function() {
const soundManager = {
audioCtx: null,
isUnlocked: false,
unlockAudio() {
if (this.isUnlocked || typeof AudioContext === "undefined") return;
this.audioCtx = new(window.AudioContext || window.webkitAudioContext)();
if (this.audioCtx.state === 'suspended') {
this.audioCtx.resume();
}
this.isUnlocked = true;
},
playSound({
type = 'sine',
freq = 440,
freqEnd = freq,
duration = 0.1,
vol = 0.5,
delay = 0
}) {
if (!this.isUnlocked) return;
try {
const oscillator = this.audioCtx.createOscillator();
const gainNode = this.audioCtx.createGain();
const startTime = this.audioCtx.currentTime + delay;
gainNode.connect(this.audioCtx.destination);
oscillator.connect(gainNode);
oscillator.type = type;
gainNode.gain.setValueAtTime(vol, startTime);
gainNode.gain.exponentialRampToValueAtTime(0.0001, startTime + duration);
oscillator.frequency.setValueAtTime(freq, startTime);
if (freq !== freqEnd) {
oscillator.frequency.exponentialRampToValueAtTime(freqEnd, startTime + duration * 0.9);
}
oscillator.start(startTime);
oscillator.stop(startTime + duration);
} catch (error) {
console.error("Error playing sound:", error);
}
},
playClick() {
this.playSound({
type: 'sine',
freq: 150,
freqEnd: 100,
duration: 0.1,
vol: 0.2
});
},
playBet() {
this.playSound({
type: 'sine',
freq: 880,
freqEnd: 1200,
duration: 0.1,
vol: 0.2
});
},
playDeal() {
const dealTime = 0.15;
for (let i = 0; i < 4; i++) {
this.playSound({
type: 'noise',
freq: 100,
freqEnd: 400,
duration: 0.02,
vol: 0.1,
delay: i * dealTime
});
}
},
playShuffle() {
const numSounds = 50;
const riffleDuration = 0.4;
for (let i = 0; i < numSounds; i++) {
const type = 'noise';
const freq = 1500 + Math.random() * 2500;
const freqEnd = 500 + Math.random() * 500;
const duration = 0.05 + Math.random() * 0.05;
const vol = 0.02 + Math.random() * 0.03;
const delay = (i / numSounds) * riffleDuration + (Math.random() - 0.5) * 0.02;
this.playSound({
type,
freq,
freqEnd,
duration,
vol,
delay
});
}
this.playSound({
type: 'noise',
freq: 800,
freqEnd: 150,
duration: 0.1,
vol: 0.05,
delay: riffleDuration
});
},
playWin() {
this.playSound({
freq: 523,
duration: 0.1,
vol: 0.3,
delay: 0
});
this.playSound({
freq: 659,
duration: 0.1,
vol: 0.3,
delay: 0.1
});
this.playSound({
freq: 783,
duration: 0.1,
vol: 0.3,
delay: 0.2
});
},
playBlackjack() {
this.playSound({
freq: 523,
duration: 0.1,
vol: 0.4,
delay: 0
});
this.playSound({
freq: 659,
duration: 0.1,
vol: 0.4,
delay: 0.1
});
this.playSound({
freq: 783,
duration: 0.1,
vol: 0.4,
delay: 0.2
});
this.playSound({
freq: 1046,
duration: 0.2,
vol: 0.4,
delay: 0.3
});
},
playLose() {
this.playSound({
type: 'square',
freq: 220,
freqEnd: 110,
duration: 0.4,
vol: 0.2
});
},
playPush() {
this.playSound({
freq: 440,
duration: 0.1,
vol: 0.2,
delay: 0
});
this.playSound({
freq: 440,
duration: 0.1,
vol: 0.2,
delay: 0.15
});
}
};
const emojiSpan = document.getElementById('blackjack_emoji');
const chipsDisplaySpan = document.getElementById('blackjack_chipsDisplay');
const goalDisplaySpan = document.getElementById('blackjack_goalDisplay');
const hitBtn = document.getElementById('blackjack_hitBtn');
const standBtn = document.getElementById('blackjack_standBtn');
const playAgainBtn = document.getElementById('blackjack_playAgainBtn');
const playerCardsDiv = document.getElementById('blackjack_playerCards');
const dealerCardsDiv = document.getElementById('blackjack_dealerCards');
const playerScoreSpan = document.getElementById('blackjack_playerScore');
const dealerScoreSpan = document.getElementById('blackjack_dealerScore');
const messageDiv = document.getElementById('blackjack_message');
const bettingBtnsDiv = document.getElementById('blackjack_bettingBtns');
const betButtons = bettingBtnsDiv.querySelectorAll('.blackjack_betBtn');
const CONFIG = {
START_CHIPS: 1000,
WIN_CONDITION_CHIPS: 100000,
MIN_BET: 10,
BLACKJACK_PAYOUT: 2.5,
WIN_PAYOUT: 2,
DEALER_STANDS_ON: 17,
NUM_DECKS: 4,
RESHUFFLE_AT_CARDS_LEFT: 52 * 4 * 0.25,
DEALER_THINK_TIME_MS: 800,
END_ROUND_DELAY_MS: 2500,
};
let deck = [];
let playerHand = [];
let dealerHand = [];
let gameActive = false;
let currentBet = 0;
let playerChips = CONFIG.START_CHIPS;
function createDeck(numDecks = 1) {
const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
let newDeck = [];
for (let i = 0; i < numDecks; i++) {
for (const suit of suits) {
for (const rank of ranks) {
newDeck.push({
rank,
suit
});
}
}
}
return newDeck;
}
function shuffleDeck(deckToShuffle) {
for (let i = deckToShuffle.length - 1; i > 0; i--) {
const j = Math.floor(Math.random() * (i + 1));
[deckToShuffle[i], deckToShuffle[j]] = [deckToShuffle[j], deckToShuffle[i]];
}
}
function getHandValue(hand) {
let value = 0;
let numAces = 0;
hand.forEach(card => {
if (card.rank === 'A') {
numAces++;
value += 11;
} else if (['K', 'Q', 'J'].includes(card.rank)) {
value += 10;
} else {
value += parseInt(card.rank);
}
});
while (value > 21 && numAces > 0) {
value -= 10;
numAces--;
}
return value;
}
function resetForNewBet() {
updateEmoji('neutral');
gameActive = false;
playerCardsDiv.innerHTML = '';
dealerCardsDiv.innerHTML = '';
playerScoreSpan.textContent = '0';
dealerScoreSpan.textContent = '0';
messageDiv.style.display = 'none';
if (playerChips > 0 && playerChips < CONFIG.MIN_BET) {
showMessage(`Not enough chips (${playerChips}) for the minimum bet of ${CONFIG.MIN_BET}. Game over.`);
soundManager.playLose();
updateEmoji('sad');
endGameActions(true);
return;
}
toggleBetButtons(true);
hitBtn.disabled = true;
standBtn.disabled = true;
playAgainBtn.style.display = 'none';
updateBalanceDisplay();
}
function startNewHand() {
if (deck.length < CONFIG.RESHUFFLE_AT_CARDS_LEFT) {
deck = createDeck(CONFIG.NUM_DECKS);
shuffleDeck(deck);
soundManager.playShuffle();
showMessage("Shuffling the deck...");
setTimeout(() => messageDiv.style.display = 'none', 1500);
}
playerHand = [];
dealerHand = [];
gameActive = true;
playerCardsDiv.innerHTML = '';
dealerCardsDiv.innerHTML = '';
messageDiv.style.display = 'none';
toggleBetButtons(false);
hitBtn.disabled = false;
standBtn.disabled = false;
playAgainBtn.style.display = 'none';
}
function placeBet(betAmount) {
if (betAmount > playerChips) {
showMessage('You do not have enough chips for that bet.');
soundManager.playLose();
return;
}
soundManager.playBet();
currentBet = betAmount;
playerChips -= currentBet;
updateBalanceDisplay();
startNewHand();
dealInitialHands();
}
function dealInitialHands() {
setTimeout(() => soundManager.playDeal(), 100);
playerHand.push(deck.pop());
setTimeout(() => soundManager.playDeal(), 300);
dealerHand.push(deck.pop());
setTimeout(() => soundManager.playDeal(), 500);
playerHand.push(deck.pop());
setTimeout(() => soundManager.playDeal(), 700);
dealerHand.push(deck.pop());
displayCards(playerHand, playerCardsDiv);
displayCards(dealerHand, dealerCardsDiv, true);
updateScores(false);
const playerScore = getHandValue(playerHand);
if (playerScore === 21) {
const dealerScore = getHandValue(dealerHand);
displayCards(dealerHand, dealerCardsDiv, false);
updateScores(true);
endGame(dealerScore === 21 ? 'push' : 'blackjack');
}
}
function hitPlayer() {
if (!gameActive) return;
playerHand.push(deck.pop());
soundManager.playDeal();
displayCards(playerHand, playerCardsDiv);
updateScores(false);
if (getHandValue(playerHand) > 21) {
endGame('player_bust');
}
}
async function standPlayer() {
if (!gameActive) return;
gameActive = false;
hitBtn.disabled = true;
standBtn.disabled = true;
displayCards(dealerHand, dealerCardsDiv, false);
updateScores(true);
while (getHandValue(dealerHand) < CONFIG.DEALER_STANDS_ON) {
await new Promise(resolve => setTimeout(resolve, CONFIG.DEALER_THINK_TIME_MS));
dealerHand.push(deck.pop());
soundManager.playDeal();
displayCards(dealerHand, dealerCardsDiv, false);
updateScores(true);
}
determineWinner();
}
function determineWinner() {
const playerScore = getHandValue(playerHand);
const dealerScore = getHandValue(dealerHand);
if (playerScore > 21) endGame('player_bust');
else if (dealerScore > 21) endGame('dealer_bust');
else if (playerScore > dealerScore) endGame('win');
else if (playerScore < dealerScore) endGame('loss');
else endGame('push');
}
function endGame(outcome) {
gameActive = false;
endGameActions(false);
displayCards(dealerHand, dealerCardsDiv, false);
updateScores(true);
let message = '';
let emojiState = 'neutral';
switch (outcome) {
case 'blackjack':
playerChips += Math.floor(currentBet * CONFIG.BLACKJACK_PAYOUT);
message = `Blackjack! You win ${Math.floor(currentBet * (CONFIG.BLACKJACK_PAYOUT - 1))}!`;
emojiState = 'happy';
soundManager.playBlackjack();
break;
case 'win':
case 'dealer_bust':
playerChips += currentBet * CONFIG.WIN_PAYOUT;
message = outcome === 'win' ? `You win ${currentBet} chips!` : `Dealer busts! You win ${currentBet}!`;
emojiState = 'happy';
soundManager.playWin();
break;
case 'player_bust':
case 'loss':
message = `You lost ${currentBet} chips.`;
emojiState = 'sad';
soundManager.playLose();
break;
case 'push':
playerChips += currentBet;
message = `Push! It's a tie.`;
emojiState = 'neutral';
soundManager.playPush();
break;
}
updateEmoji(emojiState);
showMessage(message);
setTimeout(() => {
updateBalanceDisplay();
if (playerChips > 0 && playerChips < CONFIG.WIN_CONDITION_CHIPS) {
resetForNewBet();
}
}, CONFIG.END_ROUND_DELAY_MS);
}
function playAgain() {
playerChips = CONFIG.START_CHIPS;
resetForNewBet();
showMessage('Welcome back!');
setTimeout(() => {
if (messageDiv.textContent === 'Welcome back!') {
messageDiv.style.display = 'none';
}
}, 1500);
}
function updateEmoji(state) {
emojiSpan.className = state;
switch (state) {
case 'happy':
emojiSpan.textContent = 'ðŸ˜ƒ';
break;
case 'sad':
emojiSpan.textContent = 'ðŸ˜¬';
break;
default:
emojiSpan.textContent = 'ðŸ™‚';
}
}
function updateBalanceDisplay() {
chipsDisplaySpan.textContent = playerChips.toLocaleString('en-US');
goalDisplaySpan.textContent = CONFIG.WIN_CONDITION_CHIPS.toLocaleString('en-US');
updateBetButtonState();
if (playerChips >= CONFIG.WIN_CONDITION_CHIPS) {
showMessage(`Congratulations! You've beaten the house with ${playerChips.toLocaleString('en-US')} chips!`);
updateEmoji('happy');
soundManager.playBlackjack();
endGameActions(true);
} else if (playerChips <= 0) {
showMessage('Game over! You\'ve run out of chips!');
updateEmoji('sad');
soundManager.playLose();
endGameActions(true);
}
}
function updateScores(revealDealerFullScore = false) {
playerScoreSpan.textContent = getHandValue(playerHand);
if (revealDealerFullScore) {
dealerScoreSpan.textContent = getHandValue(dealerHand);
} else {
dealerScoreSpan.textContent = (dealerHand.length > 1) ? getHandValue([dealerHand[1]]) : '0';
}
}
function displayCards(hand, targetDiv, hideFirstDealerCard = false) {
targetDiv.innerHTML = '';
hand.forEach((card, index) => {
const cardDiv = document.createElement('div');
cardDiv.classList.add('blackjack_card');
if (card.suit === 'â™¥' || card.suit === 'â™¦') {
cardDiv.classList.add('red');
}
cardDiv.style.zIndex = index + 1;
if (hideFirstDealerCard && index === 0) {
cardDiv.innerHTML = `<div style="width:100%; height:100%; background-color:#8B0000; border-radius:inherit;"></div>`;
} else {
cardDiv.innerHTML = `
<div class="blackjack_card_rank_topleft">${card.rank}</div>
<div class="blackjack_card_suit_center">${card.suit}</div>
<div class="blackjack_card_rank_bottomright">${card.rank}</div>`;
}
targetDiv.appendChild(cardDiv);
});
}
function toggleBetButtons(enable) {
betButtons.forEach(btn => {
btn.disabled = !enable;
});
if (enable) {
updateBetButtonState();
}
}
function updateBetButtonState() {
betButtons.forEach(btn => {
const betAmount = parseInt(btn.dataset.bet);
const canAfford = betAmount <= playerChips;
btn.disabled = !canAfford;
btn.style.opacity = canAfford ? '1' : '0.4';
});
}
function endGameActions(showPlayAgain) {
gameActive = false;
toggleBetButtons(false);
hitBtn.disabled = true;
standBtn.disabled = true;
if (showPlayAgain) {
playAgainBtn.style.display = 'inline-block';
}
}
function showMessage(msg) {
messageDiv.textContent = msg;
messageDiv.style.display = 'block';
}
bettingBtnsDiv.addEventListener('click', (event) => {
soundManager.unlockAudio();
const betBtn = event.target.closest('.blackjack_betBtn');
if (betBtn && !betBtn.disabled) {
const betAmount = parseInt(betBtn.dataset.bet);
placeBet(betAmount);
} else if (betBtn && betBtn.disabled) {
soundManager.playClick();
}
});
hitBtn.addEventListener('click', () => {
soundManager.unlockAudio();
soundManager.playClick();
hitPlayer();
});
standBtn.addEventListener('click', () => {
soundManager.unlockAudio();
soundManager.playClick();
standPlayer();
});
playAgainBtn.addEventListener('click', () => {
soundManager.unlockAudio();
soundManager.playClick();
playAgain();
});
function init() {
deck = createDeck(CONFIG.NUM_DECKS);
shuffleDeck(deck);
resetForNewBet();
}
init();
})();
</script>
</body>
</html>